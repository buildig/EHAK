<!DOCTYPE html>
<html>
<title>Eesti haldusjaotus</title>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
  <style>
    #map {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <div id="map"></div>

  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
  <script>
    var map = L.map('map');

    var ortofoto = L.tileLayer('http://kaart.maakaart.ee/orto/{z}/{x}/{y}.jpeg', {
      minZoom: 14,
      attribution: 'Ortofoto &copy; <a title="Maa-amet" href="http://geoportaal.maaamet.ee" target="_blank">Maa-amet</a>'
    });

    var positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
      maxZoom: 13,
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
    });

    var aluskaart = L.layerGroup([ortofoto, positron])
      .addTo(map);

    function popUp(f, l) {
      var out = [];
      if (f.properties) {
        for (key in f.properties) {
          out.push(key + ": " + f.properties[key]);
        }
        l.bindPopup(out.join("<br />"));
      }
    }

    function style(feature) {
      return {
        weight: 2,
        opacity: 0.5,
        color: 'orange',
        dashArray: '3'
      };
    }

    $.getJSON("https://rawgit.com/buildig/EHAK/master/geojson/asustusyksus.json", function(response) {
      console.log("response", response);
      var asustusyksus = new L.GeoJSON(response, {
        style: style,
        //        onEachFeature: function(feature, layer) {
        //          layer.bindPopup('<b>' + feature.properties.ANIMI + '</b></br>' + feature.properties.ONIMI + '</br>' + feature.properties.MNIMI);
        //        }
        onEachFeature: popUp
      });
      map.fitBounds(asustusyksus.getBounds());
      asustusyksus.addTo(map);
    });

    var baseMaps = {
      "Aluskaart": aluskaart
    };
    var overlayMaps = {
      //"Asustus√ºksused": asustusyksus
    };
    L.control.layers(baseMaps, overlayMaps).addTo(map);
  </script>
</body>

</html>
